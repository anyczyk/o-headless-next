(()=>{"use strict";const t=window.wp.i18n;window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("payu-payment-status-waiting"),a=document.getElementById("payu-payment-status-result"),n=document.getElementById("payu-payment-status-result-pay-link"),s=(t,s=!1)=>{a.insertAdjacentHTML("afterbegin",`<h3>${t}</h3>`),e.style.display="none",s&&(n.style.display="block")},u=async e=>{const a=await fetch(window.payu_get_status_url),n=a.headers.get("content-type");if(!a.ok){const e=n?.includes("application/json");let o;var u;if(e)o=null!==(u=(await a.json()).message)&&void 0!==u?u:(0,t.__)("Unknown Error","woo-payu-payment-gateway");else o=await a.text();return s(o),!0}const{status:o}=await a.json();switch(o){case"success":return s((0,t.__)("Your payment was successful.","woo-payu-payment-gateway")),!0;case"failed":case"cancelled":return s((0,t.__)("Your payment failed.","woo-payu-payment-gateway"),"failed"===o),!0;default:if(0===e)return s((0,t.__)("Your payment is being processed.","woo-payu-payment-gateway")),!0}return!1};window.payu_get_status_url&&document.getElementById("payu-payment-status")&&(async()=>{setTimeout(async()=>{let t=10;if(!await u(t)){const e=setInterval(async()=>{await u(t)||0===t?clearInterval(e):t--},4e3)}},3e3)})()})})();